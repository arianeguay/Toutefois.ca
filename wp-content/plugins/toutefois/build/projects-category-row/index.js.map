{"version":3,"file":"projects-category-row/index.js","mappings":"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","sources":["webpack://toutefois-blocks/./src/projects-category-row/edit.js","webpack://toutefois-blocks/./src/projects-category-row/save.js","webpack://toutefois-blocks/external window [\"wp\",\"blockEditor\"]","webpack://toutefois-blocks/external window [\"wp\",\"blocks\"]","webpack://toutefois-blocks/external window [\"wp\",\"components\"]","webpack://toutefois-blocks/external window [\"wp\",\"data\"]","webpack://toutefois-blocks/external window [\"wp\",\"element\"]","webpack://toutefois-blocks/external window [\"wp\",\"i18n\"]","webpack://toutefois-blocks/external window \"React\"","webpack://toutefois-blocks/webpack/bootstrap","webpack://toutefois-blocks/webpack/runtime/compat get default export","webpack://toutefois-blocks/webpack/runtime/define property getters","webpack://toutefois-blocks/webpack/runtime/hasOwnProperty shorthand","webpack://toutefois-blocks/webpack/runtime/make namespace object","webpack://toutefois-blocks/./src/projects-category-row/index.js"],"sourcesContent":["import { InspectorControls } from \"@wordpress/block-editor\";\nimport {\n  Notice,\n  PanelBody,\n  SelectControl,\n  Spinner,\n  ToggleControl,\n} from \"@wordpress/components\";\nimport { useSelect } from \"@wordpress/data\";\nimport { useMemo, useState } from \"@wordpress/element\";\nimport { __ } from \"@wordpress/i18n\";\n\nconst CPT_SLUG = \"projet\";\nconst TAXONOMY = \"category\"; // or 'project_category'\nconst TAX_REST_BASE =\n  TAXONOMY === \"category\" ? \"categories\" : \"project_category\";\nconst PREVIEW_LIMIT = 6;\n\n// simple helper to indent hierarchical options\nconst labelWithDepth = (name, depth) => `${\"— \".repeat(depth)}${name}`;\n\nexport default function Edit({ attributes, setAttributes }) {\n  const { category: categoryAttr /* store ID as string */ } = attributes;\n\n  const [includeChildren, setIncludeChildren] = useState(true);\n\n  const categoryId = useMemo(() => {\n    const n = Number(categoryAttr);\n    return Number.isFinite(n) && n > 0 ? n : null;\n  }, [categoryAttr]);\n\n  // --- TERMS (light payload)\n  const { terms, termsIsResolving, termsError } = useSelect((select) => {\n    const core = select(\"core\");\n    const query = {\n      per_page: -1,\n      _fields: \"id,name,parent,slug\",\n      context: \"view\",\n    };\n    const isResolving = select(\"core/data\").isResolving(\n      \"core\",\n      \"getEntityRecords\",\n      [\"taxonomy\", TAXONOMY, query]\n    );\n\n    return {\n      terms: core.getEntityRecords(\"taxonomy\", TAXONOMY, query),\n      termsIsResolving: isResolving,\n      termsError:\n        core.getLastEntityRecordsError?.(\"taxonomy\", TAXONOMY, query) ?? null,\n    };\n  }, []);\n\n  // Build a map for quick depth/children traversal\n  const { options, descendantsById } = useMemo(() => {\n    if (!terms)\n      return {\n        options: [{ label: __(\"All\", \"toutefois\"), value: \"\" }],\n        descendantsById: new Map(),\n      };\n\n    const byParent = new Map();\n    terms.forEach((t) => {\n      const list = byParent.get(t.parent || 0) || [];\n      list.push(t);\n      byParent.set(t.parent || 0, list);\n    });\n\n    // depth-first build of options to retain hierarchy ordering\n    const result = [{ label: __(\"All\", \"toutefois\"), value: \"\" }];\n    const descendants = new Map();\n\n    const walk = (parentId = 0, depth = 0) => {\n      const children = (byParent.get(parentId) || []).sort((a, b) =>\n        a.name.localeCompare(b.name, undefined, { sensitivity: \"base\" })\n      );\n      children.forEach((t) => {\n        result.push({\n          label: labelWithDepth(t.name, depth),\n          value: String(t.id),\n        });\n        // compute descendants list for quick inclusion later\n        const stack = [t.id];\n        const acc = new Set([t.id]);\n        while (stack.length) {\n          const cur = stack.pop();\n          const kids = byParent.get(cur) || [];\n          kids.forEach((k) => {\n            if (!acc.has(k.id)) {\n              acc.add(k.id);\n              stack.push(k.id);\n            }\n          });\n        }\n        descendants.set(t.id, Array.from(acc));\n        // continue DFS\n        walk(t.id, depth + 1);\n      });\n    };\n\n    walk(0, 0);\n    return { options: result, descendantsById: descendants };\n  }, [terms]);\n\n  // --- POST QUERY\n  const categoriesFilter = useMemo(() => {\n    if (!categoryId) return undefined;\n    if (!includeChildren) return [categoryId];\n    // include selected + all descendants (if any)\n    const all = descendantsById.get(categoryId) || [categoryId];\n    return all;\n  }, [categoryId, includeChildren, descendantsById]);\n\n  const postsQuery = useMemo(() => {\n    const q = {\n      per_page: PREVIEW_LIMIT,\n      _embed: true,\n      _fields:\n        \"id,slug,title,featured_media,_embedded.wp:featuredmedia.media_details.sizes\",\n      orderby: \"date\",\n      order: \"desc\",\n      status: \"publish\",\n      context: \"view\",\n    };\n    if (categoriesFilter) {\n      q[TAX_REST_BASE] = categoriesFilter;\n    }\n    return q;\n  }, [categoriesFilter]);\n\n  const { posts, postsIsResolving, postsError } = useSelect(\n    (select) => {\n      const core = select(\"core\");\n      const isResolving = select(\"core/data\").isResolving(\n        \"core\",\n        \"getEntityRecords\",\n        [\"postType\", CPT_SLUG, postsQuery]\n      );\n      return {\n        posts: core.getEntityRecords(\"postType\", CPT_SLUG, postsQuery),\n        postsIsResolving: isResolving,\n        postsError:\n          core.getLastEntityRecordsError?.(\"postType\", CPT_SLUG, postsQuery) ??\n          null,\n      };\n    },\n    [postsQuery]\n  );\n\n  const getThumb = (post) => {\n    const sizes =\n      post?._embedded?.[\"wp:featuredmedia\"]?.[0]?.media_details?.sizes || null;\n    // prefer medium_large > medium > thumbnail\n    const src =\n      sizes?.medium_large?.source_url ||\n      sizes?.medium?.source_url ||\n      sizes?.thumbnail?.source_url ||\n      null;\n    return src;\n  };\n\n  return (\n    <>\n      <InspectorControls>\n        <PanelBody title={__(\"Projects Row Settings\", \"toutefois\")} initialOpen>\n          <SelectControl\n            label={__(\"Category\", \"toutefois\")}\n            value={categoryAttr || \"\"}\n            options={options}\n            onChange={(val) => setAttributes({ category: val })}\n            help={\n              TAXONOMY === \"category\"\n                ? __(\"Filters by WordPress “Categories”.\", \"toutefois\")\n                : __(\"Filters by custom taxonomy.\", \"toutefois\")\n            }\n          />\n          <ToggleControl\n            label={__(\"Include child categories in preview\", \"toutefois\")}\n            checked={includeChildren}\n            onChange={setIncludeChildren}\n          />\n        </PanelBody>\n      </InspectorControls>\n\n      <div\n        className=\"toutefois-projects-row__preview\"\n        style={{\n          display: \"grid\",\n          gap: 12,\n          gridTemplateColumns: \"repeat(auto-fill, minmax(180px, 1fr))\",\n        }}\n      >\n        {(termsIsResolving || postsIsResolving) && <Spinner />}\n\n        {termsError && (\n          <Notice status=\"error\" isDismissible={false}>\n            {__(\"Failed to load categories.\", \"toutefois\")}\n          </Notice>\n        )}\n\n        {postsError && (\n          <Notice status=\"error\" isDismissible={false}>\n            {__(\"Failed to load projects.\", \"toutefois\")}\n          </Notice>\n        )}\n\n        {!termsIsResolving &&\n          !postsIsResolving &&\n          posts &&\n          posts.length === 0 && (\n            <Notice status=\"info\" isDismissible={false}>\n              {__(\"No projects found for this selection.\", \"toutefois\")}\n            </Notice>\n          )}\n\n        {!postsIsResolving &&\n          Array.isArray(posts) &&\n          posts.map((p) => {\n            const thumb = getThumb(p);\n            return (\n              <div\n                key={p.id}\n                style={{\n                  border: \"1px solid #ddd\",\n                  borderRadius: 8,\n                  overflow: \"hidden\",\n                  background: \"#fff\",\n                }}\n              >\n                {thumb ? (\n                  <img\n                    src={thumb}\n                    alt=\"\"\n                    style={{\n                      width: \"100%\",\n                      display: \"block\",\n                      aspectRatio: \"16 / 9\",\n                      objectFit: \"cover\",\n                    }}\n                    loading=\"lazy\"\n                    decoding=\"async\"\n                  />\n                ) : (\n                  <div\n                    style={{\n                      background: \"#f2f2f2\",\n                      width: \"100%\",\n                      aspectRatio: \"16 / 9\",\n                    }}\n                  />\n                )}\n                <div style={{ padding: 10 }}>\n                  <strong style={{ display: \"block\", marginBottom: 6 }}>\n                    {p.title?.rendered || __(\"(No title)\", \"toutefois\")}\n                  </strong>\n                </div>\n              </div>\n            );\n          })}\n      </div>\n    </>\n  );\n}\n","export default function save() {\n    return null; // Content is rendered dynamically via PHP.\n}\n","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"React\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { registerBlockType } from '@wordpress/blocks';\nimport Edit from './edit';\nimport save from './save';\nimport metadata from './block.json';\n\nregisterBlockType(metadata.name, {\n    edit: Edit,\n    save,\n});\n"],"names":["InspectorControls","Notice","PanelBody","SelectControl","Spinner","ToggleControl","useSelect","useMemo","useState","__","CPT_SLUG","TAXONOMY","TAX_REST_BASE","PREVIEW_LIMIT","labelWithDepth","name","depth","repeat","Edit","attributes","setAttributes","category","categoryAttr","includeChildren","setIncludeChildren","categoryId","n","Number","isFinite","terms","termsIsResolving","termsError","select","_core$getLastEntityRe","core","query","per_page","_fields","context","isResolving","getEntityRecords","getLastEntityRecordsError","options","descendantsById","label","value","Map","byParent","forEach","t","list","get","parent","push","set","result","descendants","walk","parentId","children","sort","a","b","localeCompare","undefined","sensitivity","String","id","stack","acc","Set","length","cur","pop","kids","k","has","add","Array","from","categoriesFilter","all","postsQuery","q","_embed","orderby","order","status","posts","postsIsResolving","postsError","_core$getLastEntityRe2","getThumb","post","sizes","_embedded","media_details","src","medium_large","source_url","medium","thumbnail","createElement","Fragment","title","initialOpen","onChange","val","help","checked","className","style","display","gap","gridTemplateColumns","isDismissible","isArray","map","p","thumb","key","border","borderRadius","overflow","background","alt","width","aspectRatio","objectFit","loading","decoding","padding","marginBottom","rendered","save","registerBlockType","metadata","edit"],"sourceRoot":""}