{"version":3,"file":"projects-category-row/index.js","mappings":"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","sources":["webpack://toutefois-blocks/./src/projects-category-row/edit.js","webpack://toutefois-blocks/./src/projects-category-row/save.js","webpack://toutefois-blocks/external window [\"wp\",\"blockEditor\"]","webpack://toutefois-blocks/external window [\"wp\",\"blocks\"]","webpack://toutefois-blocks/external window [\"wp\",\"components\"]","webpack://toutefois-blocks/external window [\"wp\",\"data\"]","webpack://toutefois-blocks/external window [\"wp\",\"element\"]","webpack://toutefois-blocks/external window [\"wp\",\"i18n\"]","webpack://toutefois-blocks/external window \"React\"","webpack://toutefois-blocks/webpack/bootstrap","webpack://toutefois-blocks/webpack/runtime/compat get default export","webpack://toutefois-blocks/webpack/runtime/define property getters","webpack://toutefois-blocks/webpack/runtime/hasOwnProperty shorthand","webpack://toutefois-blocks/webpack/runtime/make namespace object","webpack://toutefois-blocks/./src/projects-category-row/index.js"],"sourcesContent":["import { InspectorControls } from \"@wordpress/block-editor\";\nimport {\n  Notice,\n  PanelBody,\n  SelectControl,\n  Spinner,\n} from \"@wordpress/components\";\nimport { useSelect } from \"@wordpress/data\";\nimport { useMemo } from \"@wordpress/element\";\nimport { __ } from \"@wordpress/i18n\";\n\nconst CPT_SLUG = \"projet\";\nconst TAXONOMY = \"category\"; // keep using the categories endpoint\nconst TAX_REST_BASE = \"categories\"; // wp/v2/categories\nconst PREVIEW_LIMIT = 4; // tiny to avoid load\n\nexport default function Edit({ attributes, setAttributes }) {\n  const { category } = attributes; // store category ID as string\n\n  // --- Load categories (id + name only)\n  const terms = useSelect(\n    (select) =>\n      select(\"core\").getEntityRecords(\"taxonomy\", TAXONOMY, {\n        per_page: -1,\n        _fields: \"id,name\",\n        context: \"view\",\n      }),\n    []\n  );\n\n  const options = useMemo(() => {\n    const base = [{ label: __(\"All\", \"toutefois\"), value: \"\" }];\n    if (!Array.isArray(terms)) return base;\n    return base.concat(\n      terms\n        .slice()\n        .sort((a, b) => a.name.localeCompare(b.name))\n        .map((t) => ({ label: t.name, value: String(t.id) }))\n    );\n  }, [terms]);\n\n  const categoryId = useMemo(() => {\n    const n = Number(category);\n    return Number.isFinite(n) && n > 0 ? n : null;\n  }, [category]);\n\n  // --- Fetch posts (title only)\n  const posts = useSelect(\n    (select) => {\n      const query = {\n        per_page: PREVIEW_LIMIT,\n        _fields: \"id,title.rendered\",\n        orderby: \"date\",\n        order: \"desc\",\n        status: \"publish\",\n        context: \"view\",\n      };\n      if (categoryId) query[TAX_REST_BASE] = [categoryId];\n      return select(\"core\").getEntityRecords(\"postType\", CPT_SLUG, query);\n    },\n    [categoryId]\n  );\n\n  return (\n    <>\n      <InspectorControls>\n        <PanelBody title={__(\"Projects Row Settings\", \"toutefois\")} initialOpen>\n          <SelectControl\n            label={__(\"Category\", \"toutefois\")}\n            value={category || \"\"}\n            options={options}\n            onChange={(val) => setAttributes({ category: val })}\n            help={__(\"Filters by WordPress “Categories”.\", \"toutefois\")}\n          />\n        </PanelBody>\n      </InspectorControls>\n\n      <div\n        className=\"toutefois-projects-row__preview\"\n        style={{ display: \"grid\", gap: 8 }}\n      >\n        {!terms || posts === undefined ? (\n          <Spinner />\n        ) : Array.isArray(posts) && posts.length > 0 ? (\n          <ul style={{ margin: 0, paddingLeft: 18 }}>\n            {posts.map((p) => (\n              <li key={p.id} style={{ lineHeight: 1.4 }}>\n                {p.title?.rendered || __(\"(No title)\", \"toutefois\")}\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <Notice status=\"info\" isDismissible={false}>\n            {__(\"No projects found for this selection.\", \"toutefois\")}\n          </Notice>\n        )}\n      </div>\n    </>\n  );\n}\n","export default function save() {\n    return null; // Content is rendered dynamically via PHP.\n}\n","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"React\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { registerBlockType } from '@wordpress/blocks';\nimport Edit from './edit';\nimport save from './save';\nimport metadata from './block.json';\n\nregisterBlockType(metadata.name, {\n    edit: Edit,\n    save,\n});\n"],"names":["InspectorControls","Notice","PanelBody","SelectControl","Spinner","useSelect","useMemo","__","CPT_SLUG","TAXONOMY","TAX_REST_BASE","PREVIEW_LIMIT","Edit","attributes","setAttributes","category","terms","select","getEntityRecords","per_page","_fields","context","options","base","label","value","Array","isArray","concat","slice","sort","a","b","name","localeCompare","map","t","String","id","categoryId","n","Number","isFinite","posts","query","orderby","order","status","createElement","Fragment","title","initialOpen","onChange","val","help","className","style","display","gap","undefined","length","margin","paddingLeft","p","key","lineHeight","rendered","isDismissible","save","registerBlockType","metadata","edit"],"sourceRoot":""}